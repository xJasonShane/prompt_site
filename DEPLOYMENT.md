# éƒ¨ç½²æŒ‡å—

æœ¬æŒ‡å—æä¾›äº†å°†AIç»˜å›¾å…ƒæ•°æ®ç®¡ç†ç³»ç»Ÿéƒ¨ç½²åˆ°å„ç§å¹³å°çš„è¯¦ç»†æ­¥éª¤ã€‚

## ğŸ“‹ ç¯å¢ƒå˜é‡é…ç½®

åœ¨éƒ¨ç½²å‰ï¼Œè¯·ç¡®ä¿æ­£ç¡®é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ã€‚æ‰€æœ‰å¿…éœ€å˜é‡éƒ½å¿…é¡»è®¾ç½®ï¼Œå¦åˆ™åº”ç”¨å°†æ— æ³•æ­£å¸¸è¿è¡Œã€‚

| å˜é‡å | ç±»å‹ | æè¿° | å¿…éœ€ | ç¤ºä¾‹å€¼ | æœ€ä½³å®è·µ |
|--------|------|------|------|--------|----------|
| `DATABASE_URL` | String | æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸² | âœ… | `file:./prompt_site.db` | ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨å¤–éƒ¨æ•°æ®åº“æœåŠ¡ |
| `NEXTAUTH_SECRET` | String | NextAuthåŠ å¯†å¯†é’¥ï¼Œç”¨äºä¼šè¯å®‰å…¨ | âœ… | `openssl rand -base64 32` | ä½¿ç”¨å¼ºéšæœºå€¼ï¼Œå®šæœŸè½®æ¢ |
| `NEXTAUTH_URL` | String | åº”ç”¨çš„å®Œæ•´URLï¼Œç”¨äºé‡å®šå‘ | âœ… | `https://your-app.example.com` | ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨HTTPS |
| `R2_ENDPOINT` | String | Cloudflare R2å­˜å‚¨ç«¯ç‚¹URL | âœ… | `https://your-account-id.r2.cloudflarestorage.com` | ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„è´¦æˆ·ID |
| `R2_ACCESS_KEY_ID` | String | R2è®¿é—®å¯†é’¥ID | âœ… | `AKIAIOSFODNN7EXAMPLE` | éµå¾ªæœ€å°æƒé™åŸåˆ™ï¼Œåªæˆäºˆå¿…è¦æƒé™ |
| `R2_SECRET_ACCESS_KEY` | String | R2ç§˜å¯†è®¿é—®å¯†é’¥ | âœ… | `wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY` | å¦¥å–„ä¿ç®¡ï¼Œé¿å…æ³„éœ² |
| `R2_BUCKET_NAME` | String | R2å­˜å‚¨æ¡¶åç§° | âœ… | `prompt-images` | ä½¿ç”¨æè¿°æ€§åç§°ï¼Œä¾¿äºç®¡ç† |

### ç¯å¢ƒå˜é‡ç”Ÿæˆå·¥å…·

- **ç”ŸæˆNEXTAUTH_SECRET**ï¼š
  ```bash
  # Linux/macOS
  openssl rand -base64 32
  
  # Windows PowerShell
  [Convert]::ToBase64String([System.Security.Cryptography.RandomNumberGenerator]::GetBytes(32))
  ```

### å®‰å…¨å»ºè®®

- æ°¸è¿œä¸è¦å°†ç¯å¢ƒå˜é‡æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ
- ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨åŠ å¯†çš„æ–¹å¼å­˜å‚¨æ•æ„Ÿå˜é‡
- å®šæœŸè½®æ¢è®¿é—®å¯†é’¥å’ŒåŠ å¯†å¯†é’¥
- é™åˆ¶R2å­˜å‚¨æ¡¶çš„è®¿é—®æƒé™ï¼Œä»…å…è®¸å¿…è¦çš„IPå’Œæ“ä½œ

## ğŸš€ éƒ¨ç½²é€‰é¡¹

### 1. Cloudflare Pages éƒ¨ç½²

#### 1.1 å‰ç½®æ¡ä»¶
- âœ… Cloudflareè´¦å·ï¼ˆå…è´¹æˆ–ä»˜è´¹å‡å¯ï¼‰
- âœ… Cloudflare R2å­˜å‚¨æ¡¶å·²åˆ›å»ºå¹¶é…ç½®CORSç­–ç•¥
- âœ… Node.js 18.17+ æˆ– 20.6+
- âœ… Wrangler CLI å·²å®‰è£…ï¼š`npm install -g wrangler`

#### 1.2 éƒ¨ç½²æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Git Repository     â”‚â”€â”€â”€â”€â–¶â”‚ Cloudflare Pages â”‚â”€â”€â”€â”€â–¶â”‚ Cloudflare R2     â”‚
â”‚                    â”‚     â”‚ (Edge Runtime)   â”‚     â”‚ Storage           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 1.3 éƒ¨ç½²æ­¥éª¤

1. **ç™»å½•Wrangler CLI**
   ```bash
   wrangler login
   ```
   - è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼Œç™»å½•æ‚¨çš„Cloudflareè´¦å·
   - æˆæƒWranglerè®¿é—®æ‚¨çš„Cloudflareèµ„æº
   - æˆåŠŸåï¼Œç»ˆç«¯ä¼šæ˜¾ç¤ºç™»å½•æˆåŠŸæ¶ˆæ¯

2. **æ„å»ºç”Ÿäº§ç‰ˆæœ¬**
   ```bash
   npm run build
   ```
   - ç”Ÿæˆä¼˜åŒ–çš„ç”Ÿäº§ä»£ç 
   - è¾“å‡ºç›®å½•ï¼š`.next`
   - ç¡®ä¿æ„å»ºè¿‡ç¨‹æ— é”™è¯¯

3. **éƒ¨ç½²åˆ°Cloudflare Pages**
   ```bash
   npx wrangler pages deploy .next
   ```
   - éƒ¨ç½²`.next`ç›®å½•åˆ°Cloudflare Pages
   - éƒ¨ç½²å®Œæˆåï¼Œè·å¾—ä¸´æ—¶é¢„è§ˆURL
   - ç¤ºä¾‹è¾“å‡ºï¼š`âœ… Deployment complete! https://your-project.pages.dev`

4. **é…ç½®ç¯å¢ƒå˜é‡**
   1. ç™»å½• [Cloudflareæ§åˆ¶å°](https://dash.cloudflare.com/)
   2. å¯¼èˆªåˆ° **Pages** > é€‰æ‹©æ‚¨çš„é¡¹ç›®
   3. ç‚¹å‡» **Settings** > **Environment Variables**
   4. ç‚¹å‡» **Add variable**
   5. é…ç½®æ¯ä¸ªç¯å¢ƒå˜é‡ï¼š
      - è¾“å…¥å˜é‡åå’Œå€¼ï¼ˆå‚è€ƒç¯å¢ƒå˜é‡è¡¨æ ¼ï¼‰
      - é€‰æ‹© **Encrypt** é€‰é¡¹åŠ å¯†æ•æ„Ÿå˜é‡
      - é€‰æ‹© **Production** ç¯å¢ƒ
      - ç‚¹å‡» **Save"
   6. é‡å¤æ­¥éª¤4-5ï¼Œæ·»åŠ æ‰€æœ‰å¿…éœ€çš„ç¯å¢ƒå˜é‡

5. **é…ç½®R2å­˜å‚¨æ¡¶ç»‘å®š**
   1. åœ¨é¡¹ç›®è®¾ç½®ä¸­ï¼Œå¯¼èˆªåˆ° **Functions** > **R2 Bucket Bindings**
   2. ç‚¹å‡» **Add binding**
   3. é…ç½®ï¼š
      - **Variable name**: `R2`ï¼ˆå¿…é¡»ä½¿ç”¨æ­¤åç§°ï¼Œä¸ä»£ç ä¸­é…ç½®ä¸€è‡´ï¼‰
      - **Bucket name**: é€‰æ‹©æ‚¨çš„R2å­˜å‚¨æ¡¶
      - **Environment**: Production
   4. ç‚¹å‡» **Save"

6. **é…ç½®è‡ªå®šä¹‰åŸŸï¼ˆæ¨èï¼‰**
   1. å¯¼èˆªåˆ° **Custom domains**
   2. ç‚¹å‡» **Set up a custom domain**
   3. è¾“å…¥æ‚¨çš„åŸŸåï¼ˆå¦‚ `ai-prompt.example.com`ï¼‰
   4. æŒ‰ç…§æç¤ºå®ŒæˆDNSé…ç½®
   5. ç­‰å¾…CloudflareéªŒè¯DNSè®°å½•ï¼ˆé€šå¸¸1-5åˆ†é’Ÿï¼‰

#### 1.4 éªŒè¯éƒ¨ç½²

1. **åŸºç¡€éªŒè¯**
   - è®¿é—®æ‚¨çš„åŸŸåæˆ–Cloudflareæä¾›çš„é¢„è§ˆURL
   - æ£€æŸ¥é¦–é¡µæ˜¯å¦æ­£å¸¸åŠ è½½
   - éªŒè¯å¯¼èˆªèœå•æ˜¯å¦å¯æ­£å¸¸ç‚¹å‡»

2. **åŠŸèƒ½éªŒè¯**
   - ç‚¹å‡»"ä¸Šä¼ "æŒ‰é’®ï¼Œè¿›å…¥ä¸Šä¼ é¡µé¢
   - å¡«å†™è¡¨å•å¹¶ä¸Šä¼ ä¸€å¼ æµ‹è¯•å›¾ç‰‡
   - æ£€æŸ¥å›¾ç‰‡æ˜¯å¦æˆåŠŸä¸Šä¼ å¹¶æ˜¾ç¤ºåœ¨ç”»å»Šä¸­
   - ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹è¯¦æƒ…ï¼Œç¡®è®¤å…ƒæ•°æ®å®Œæ•´æ˜¾ç¤º

3. **æ€§èƒ½éªŒè¯**
   - æ£€æŸ¥é¡µé¢åŠ è½½æ—¶é—´ï¼ˆæ¨èä½¿ç”¨Chrome DevToolsï¼‰
   - éªŒè¯å›¾ç‰‡æ˜¯å¦ä½¿ç”¨äº†é€‚å½“çš„ç¼“å­˜ç­–ç•¥
   - æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

#### 1.5 æœ€ä½³å®è·µ

- **å¯ç”¨è‡ªåŠ¨éƒ¨ç½²**ï¼šé…ç½®Gitä»“åº“ä¸Cloudflare Pagesçš„è‡ªåŠ¨å…³è”ï¼Œå®ç°ä»£ç æ¨é€è‡ªåŠ¨éƒ¨ç½²
- **é…ç½®æ„å»ºå‰è„šæœ¬**ï¼šæ·»åŠ ä¾èµ–å®‰è£…å’Œæ•°æ®åº“è¿ç§»ç­‰æ„å»ºå‰æ­¥éª¤
- **è®¾ç½®å›æ»šæœºåˆ¶**ï¼šåˆ©ç”¨Cloudflare Pagesçš„éƒ¨ç½²å†å²ï¼Œåœ¨å‡ºç°é—®é¢˜æ—¶å¿«é€Ÿå›æ»š
- **ç›‘æ§æ€§èƒ½**ï¼šä½¿ç”¨Cloudflare Analyticsç›‘æ§ç½‘ç«™æµé‡å’Œæ€§èƒ½
- **å¯ç”¨è¾¹ç¼˜ç¼“å­˜**ï¼šé…ç½®é€‚å½“çš„ç¼“å­˜ç­–ç•¥ï¼Œæé«˜è®¿é—®é€Ÿåº¦

#### 1.6 æ•…éšœæ’é™¤

| é—®é¢˜ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|----------|----------|
| éƒ¨ç½²å¤±è´¥ | Wranglerç‰ˆæœ¬è¿‡æ—§ | è¿è¡Œ `wrangler upgrade` æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ |
| R2ä¸Šä¼ å¤±è´¥ | å­˜å‚¨æ¡¶ç»‘å®šé”™è¯¯ | æ£€æŸ¥R2ç»‘å®šåç§°æ˜¯å¦ä¸º `R2`ï¼Œå­˜å‚¨æ¡¶æ˜¯å¦å­˜åœ¨ |
| ç¯å¢ƒå˜é‡æœªç”Ÿæ•ˆ | ç¯å¢ƒé€‰æ‹©é”™è¯¯ | ç¡®ä¿ç¯å¢ƒå˜é‡å·²æ·»åŠ åˆ° **Production** ç¯å¢ƒ |
| é¡µé¢åŠ è½½ç¼“æ…¢ | èµ„æºæœªä¼˜åŒ– | æ£€æŸ¥å›¾ç‰‡å¤§å°ï¼Œç¡®ä¿ä½¿ç”¨é€‚å½“çš„å‹ç¼©ç­–ç•¥ |
| æ„å»ºé”™è¯¯ | ä¾èµ–ç‰ˆæœ¬å†²çª | åˆ é™¤ `node_modules` å’Œ `package-lock.json`ï¼Œé‡æ–°å®‰è£…ä¾èµ– |

### 2. Vercel éƒ¨ç½²

#### 2.1 å‰ç½®æ¡ä»¶
- âœ… GitHub/GitLab/Bitbucketä»“åº“ï¼ˆé¡¹ç›®å·²æ¨é€ï¼‰
- âœ… Cloudflare R2å­˜å‚¨æ¡¶å·²åˆ›å»º
- âœ… Vercelè´¦å·ï¼ˆå¯ä½¿ç”¨GitHubè´¦å·ç™»å½•ï¼‰
- âœ… é¡¹ç›®åŒ…å«å®Œæ•´çš„`package.json`å’Œ`next.config.js`

#### 2.2 éƒ¨ç½²æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Git Repository     â”‚â”€â”€â”€â”€â–¶â”‚ Vercel           â”‚â”€â”€â”€â”€â–¶â”‚ Cloudflare R2     â”‚
â”‚                    â”‚     â”‚ (Serverless)     â”‚     â”‚ Storage           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.3 éƒ¨ç½²æ­¥éª¤

1. **å‡†å¤‡Gitä»“åº“**
   ```bash
   # ç¡®ä¿æ‰€æœ‰æ›´æ”¹å·²æäº¤
   git add .
   git commit -m "feat: complete ai prompt site"
   git push origin main
   ```
   - éªŒè¯ä»£ç å·²æˆåŠŸæ¨é€åˆ°è¿œç¨‹ä»“åº“
   - ç¡®ä¿`main`åˆ†æ”¯æ˜¯é»˜è®¤åˆ†æ”¯

2. **å¯¼å…¥é¡¹ç›®åˆ°Vercel**
   1. ç™»å½• [Vercelæ§åˆ¶å°](https://vercel.com/dashboard)
   2. ç‚¹å‡» **Add New** > **Project**
   3. åœ¨"Import Git Repository"é¡µé¢ï¼š
      - é€‰æ‹©æ‚¨çš„Gitæä¾›å•†ï¼ˆGitHub/GitLab/Bitbucketï¼‰
      - æœç´¢å¹¶é€‰æ‹©æ‚¨çš„é¡¹ç›®ä»“åº“
      - ç‚¹å‡» **Import"

3. **é…ç½®é¡¹ç›®è®¾ç½®**
   1. **Framework Preset**ï¼šè‡ªåŠ¨è¯†åˆ«ä¸º"Next.js"ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰
   2. **Root Directory**ï¼šä¿æŒé»˜è®¤ï¼ˆ`.`ï¼‰
   3. **Build and Output Settings**ï¼š
      - **Build Command**ï¼š`npm run build`ï¼ˆé»˜è®¤ï¼‰
      - **Output Directory**ï¼š`.next`ï¼ˆé»˜è®¤ï¼‰
      - **Install Command**ï¼š`npm install`ï¼ˆé»˜è®¤ï¼‰
   4. ç‚¹å‡» **Continue**

4. **é…ç½®ç¯å¢ƒå˜é‡**
   1. åœ¨"Environment Variables"éƒ¨åˆ†ï¼Œç‚¹å‡» **Add**
   2. é€ä¸ªæ·»åŠ æ‰€æœ‰å¿…éœ€çš„ç¯å¢ƒå˜é‡ï¼ˆå‚è€ƒç¯å¢ƒå˜é‡è¡¨æ ¼ï¼‰ï¼š
      - ä¾‹å¦‚ï¼š`DATABASE_URL`ã€`NEXTAUTH_SECRET`ã€`R2_ENDPOINT`ç­‰
   3. å¯¹äºæ•æ„Ÿå˜é‡ï¼Œç¡®ä¿å€¼æ­£ç¡®ä¸”ä¸åŒ…å«å¤šä½™ç©ºæ ¼
   4. ç‚¹å‡» **Add** ä¿å­˜æ¯ä¸ªå˜é‡
   5. å®Œæˆåï¼Œç‚¹å‡» **Deploy"

5. **ç­‰å¾…éƒ¨ç½²å®Œæˆ**
   - Vercelä¼šè‡ªåŠ¨æ‰§è¡Œï¼šä¾èµ–å®‰è£… â†’ æ„å»º â†’ éƒ¨ç½²
   - éƒ¨ç½²è¿‡ç¨‹é€šå¸¸éœ€è¦1-3åˆ†é’Ÿ
   - éƒ¨ç½²å®Œæˆåï¼Œé¡µé¢ä¼šæ˜¾ç¤º"Deployment Complete"
   - è·å¾—Vercelæä¾›çš„URLï¼š`https://your-project.vercel.app`

6. **é…ç½®è‡ªå®šä¹‰åŸŸï¼ˆæ¨èï¼‰**
   1. åœ¨Vercelé¡¹ç›®ä¸­ï¼Œå¯¼èˆªåˆ° **Settings** > **Domains**
   2. ç‚¹å‡» **Add**ï¼Œè¾“å…¥æ‚¨çš„è‡ªå®šä¹‰åŸŸåï¼ˆå¦‚ `ai-prompt.example.com`ï¼‰
   3. æŒ‰ç…§Vercelçš„DNSé…ç½®æŒ‡å—å®Œæˆè®¾ç½®ï¼š
      - å¯¹äºAè®°å½•ï¼šæŒ‡å‘ `76.76.21.21`
      - å¯¹äºCNAMEè®°å½•ï¼šæŒ‡å‘ `cname.vercel-dns.com`
   4. ç­‰å¾…DNSè®°å½•ç”Ÿæ•ˆï¼ˆé€šå¸¸5-10åˆ†é’Ÿï¼‰
   5. Vercelä¼šè‡ªåŠ¨ä¸ºæ‚¨çš„åŸŸåé…ç½®SSLè¯ä¹¦

#### 2.4 éªŒè¯éƒ¨ç½²

1. **åŸºç¡€éªŒè¯**
   - è®¿é—®æ‚¨çš„Vercel URLï¼ˆå¦‚ `https://your-project.vercel.app`ï¼‰
   - æ£€æŸ¥é¦–é¡µæ˜¯å¦æ­£å¸¸åŠ è½½
   - éªŒè¯é¡µé¢å“åº”å¼è®¾è®¡ï¼ˆåœ¨ä¸åŒè®¾å¤‡å°ºå¯¸ä¸‹æµ‹è¯•ï¼‰

2. **åŠŸèƒ½éªŒè¯**
   - æ³¨å†Œ/ç™»å½•åŠŸèƒ½
   - å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½ï¼ˆæµ‹è¯•ä¸åŒå¤§å°çš„å›¾ç‰‡ï¼‰
   - ç”»å»Šæµè§ˆå’Œæœç´¢åŠŸèƒ½
   - å›¾ç‰‡è¯¦æƒ…æŸ¥çœ‹ï¼ˆåŒ…æ‹¬å…ƒæ•°æ®ï¼‰
   - æ·±è‰²/æµ…è‰²æ¨¡å¼åˆ‡æ¢

3. **æ€§èƒ½éªŒè¯**
   - ä½¿ç”¨ [PageSpeed Insights](https://pagespeed.web.dev/) æµ‹è¯•æ€§èƒ½
   - æ£€æŸ¥APIå“åº”æ—¶é—´
   - éªŒè¯å›¾ç‰‡åŠ è½½ä¼˜åŒ–

#### 2.5 æœ€ä½³å®è·µ

- **å¯ç”¨è‡ªåŠ¨éƒ¨ç½²**ï¼šé…ç½®Vercelä¸Gitä»“åº“çš„è‡ªåŠ¨å…³è”ï¼Œå®ç°ä»£ç æ¨é€è‡ªåŠ¨éƒ¨ç½²
- **é…ç½®éƒ¨ç½²é¢„è§ˆ**ï¼šä¸ºPull Requestsè‡ªåŠ¨ç”Ÿæˆé¢„è§ˆURLï¼Œä¾¿äºä»£ç å®¡æŸ¥
- **ä½¿ç”¨ç¯å¢ƒåˆ†æ”¯**ï¼šä¸ºä¸åŒç¯å¢ƒï¼ˆdev/staging/prodï¼‰é…ç½®ç‹¬ç«‹çš„åˆ†æ”¯å’Œç¯å¢ƒå˜é‡
- **ç›‘æ§éƒ¨ç½²çŠ¶æ€**ï¼šå¯ç”¨Verceléƒ¨ç½²é€šçŸ¥ï¼ŒåŠæ—¶äº†è§£éƒ¨ç½²ç»“æœ
- **ä¼˜åŒ–æ„å»ºé…ç½®**ï¼šä½¿ç”¨`vercel.json`è‡ªå®šä¹‰æ„å»ºå’Œéƒ¨ç½²è¡Œä¸º

#### 2.6 æ•…éšœæ’é™¤

| é—®é¢˜ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|----------|----------|
| æ„å»ºå¤±è´¥ï¼šä¾èµ–å®‰è£…é”™è¯¯ | package.jsonä¾èµ–ç‰ˆæœ¬å†²çª | åˆ é™¤`package-lock.json`ï¼Œæ›´æ–°ä¾èµ–ç‰ˆæœ¬ |
| éƒ¨ç½²è¶…æ—¶ | æ„å»ºæ—¶é—´è¿‡é•¿ | ä¼˜åŒ–æ„å»ºè„šæœ¬ï¼Œå‡å°‘ä¾èµ–æ•°é‡ |
| ç¯å¢ƒå˜é‡æœªç”Ÿæ•ˆ | å˜é‡åæ‹¼å†™é”™è¯¯ | æ£€æŸ¥å˜é‡åæ˜¯å¦ä¸ä»£ç ä¸­ä½¿ç”¨çš„ä¸€è‡´ |
| R2è®¿é—®è¢«æ‹’ç» | R2å¯†é’¥é…ç½®é”™è¯¯ | éªŒè¯R2_ACCESS_KEY_IDå’ŒR2_SECRET_ACCESS_KEY |
| å›¾ç‰‡æ— æ³•æ˜¾ç¤º | å›¾ç‰‡URLé…ç½®é”™è¯¯ | æ£€æŸ¥R2_ENDPOINTå’ŒR2_BUCKET_NAMEæ˜¯å¦æ­£ç¡® |

#### 2.7 é«˜çº§é…ç½®

**é…ç½®`vercel.json`**ï¼ˆå¯é€‰ï¼Œé¡¹ç›®æ ¹ç›®å½•ï¼‰ï¼š
```json
{
  "version": 2,
  "builds": [
    {
      "src": "next.config.js",
      "use": "@vercel/next"
    }
  ],
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=31536000, immutable"
        }
      ]
    }
  ],
  "redirects": [
    {
      "source": "/old-path",
      "destination": "/new-path",
      "permanent": true
    }
  ]
}
```

### 3. GitHub Pages éƒ¨ç½²

#### 3.1 å‰ç½®æ¡ä»¶
- âœ… GitHubä»“åº“
- âœ… Cloudflare R2å­˜å‚¨æ¡¶å·²åˆ›å»º
- âœ… äº†è§£é™æ€ç½‘ç«™éƒ¨ç½²é™åˆ¶

#### 3.2 éƒ¨ç½²æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GitHub Repository  â”‚â”€â”€â”€â”€â–¶â”‚ GitHub Actions   â”‚â”€â”€â”€â”€â–¶â”‚ GitHub Pages      â”‚
â”‚                    â”‚     â”‚                  â”‚     â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â–²                                                â”‚
          â”‚                                                â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.3 éƒ¨ç½²æ­¥éª¤

1. **é…ç½®é™æ€å¯¼å‡º**
   ç¼–è¾‘ `next.config.js`ï¼Œå¯ç”¨é™æ€å¯¼å‡ºï¼š
   ```javascript
   /** @type {import('next').NextConfig} */
   const nextConfig = {
     images: {
       remotePatterns: [
         {
           protocol: 'https',
           hostname: '**',
         },
       ],
       unoptimized: true, // GitHub Pagesä¸æ”¯æŒNext.jså›¾ç‰‡ä¼˜åŒ–
     },
     output: 'export', // å¯ç”¨é™æ€HTMLå¯¼å‡º
     basePath: '/prompt-site', // æ›¿æ¢ä¸ºæ‚¨çš„ä»“åº“åç§°
     trailingSlash: true, // ç¡®ä¿ç”Ÿæˆå¸¦æœ‰å°¾éƒ¨æ–œæ çš„URL
   };
   
   module.exports = nextConfig;
   ```

2. **é…ç½®æ„å»ºè„šæœ¬**
   ç¡®ä¿ `package.json` ä¸­åŒ…å«ä»¥ä¸‹è„šæœ¬ï¼š
   ```json
   {
     "scripts": {
       "build": "next build",
       "export": "next export",
       "deploy": "npm run build && npm run export"
     }
   }
   ```

3. **æ£€æŸ¥GitHub Actionså·¥ä½œæµ**
   é¡¹ç›®å·²åŒ…å« `.github/workflows/deploy.yml`ï¼Œå†…å®¹å¦‚ä¸‹ï¼š
   ```yaml
   name: Deploy to GitHub Pages

   on:
     push:
       branches: [ main ]
   
   jobs:
     build:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v4
         - uses: actions/setup-node@v4
           with:
             node-version: '20'
             cache: 'npm'
         - run: npm install
         - run: npm run build
         - uses: actions/upload-pages-artifact@v3
           with:
             path: ./out
   
     deploy:
       needs: build
       permissions:
         pages: write
         id-token: write
       environment:
         name: github-pages
         url: ${{ steps.deployment.outputs.page_url }}
       runs-on: ubuntu-latest
       steps:
         - uses: actions/deploy-pages@v4
   ```

4. **é…ç½®GitHub Pages**
   1. ç™»å½•GitHubï¼Œè¿›å…¥ä»“åº“è®¾ç½®
   2. å¯¼èˆªåˆ° **Settings** > **Pages**
   3. **Source**ï¼šé€‰æ‹© "GitHub Actions"
   4. ç‚¹å‡» **Save"

5. **è§¦å‘éƒ¨ç½²**
   ```bash
   git add .
   git commit -m "feat: configure github pages deployment